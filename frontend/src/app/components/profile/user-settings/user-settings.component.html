<!-- Avatar -->
<div id="avatar-setting">
  <p class="text-center" style="font-family: montserrat-bold; font-size: 20px">
    –í–∞—à–µ —Ñ–æ—Ç–æ
  </p>
  <img
    style="height: 150px !important; width: 150px !important"
    class="avatar mb-3"
    [src]="photoUrl"
    alt=""
  />
  <div id="avatar-actions">
    <button (click)="deletePhoto()" class="delete-btn">
      <fa-icon [icon]="icons.delete"></fa-icon>
      &nbsp; –í–∏–¥–∞–ª–∏—Ç–∏
    </button>
    <label class="filled-btn" for="photo-input">
      <fa-icon [icon]="icons.upload"></fa-icon>
      &nbsp; –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
    </label>
    <input
      id="photo-input"
      type="file"
      accept="image/png"
      (change)="onFileSelected($event)"
    />
  </div>
</div>

<!-- Name, Email, PhoneNumber -->
<div id="data-setting">
  <p class="text-center" style="font-family: montserrat-bold; font-size: 20px">
    –í–∞—à—ñ –¥–∞–Ω—ñ
  </p>
  <form [formGroup]="detailsForm" (ngSubmit)="onSubmit()">
    <!-- Name field -->
    <fieldset class="input-group has-validation">
      <div
        class="w-100"
        [class.is-invalid]="name.invalid && (name.dirty || name.touched)"
      >
        <input
          [class.is-invalid]="
            detailsForm.get('name')?.invalid &&
            (detailsForm.get('name').dirty || detailsForm.get('name').touched)
          "
          formControlName="name"
          type="text"
          class="form-control"
          placeholder="–Ü–º'—è*"
        />
      </div>
      <div class="invalid-feedback">
        <span class="error-span" *ngIf="name.hasError('required')">
          –Ü–º'—è –æ–±–æ–≤'—è–∑–∫–æ–≤–µ
        </span>
        <div *ngIf="name.hasError('pattern')">
          <span class="error-span">
            –Ü–º'—è –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ –ª—ñ—Ç–µ—Ä–∏, –∞–ø–æ—Å—Ç—Ä–æ—Ñ —Ç–∞ –ø—Ä–æ–±—ñ–ª
          </span>
        </div>
        <div *ngIf="name.hasError('minlength')">
          <span class="error-span">
            –Ü–º'—è –ø–æ–≤–∏–Ω–Ω–æ –º—ñ—Å—Ç–∏—Ç–∏ –ø—Ä–∏–Ω–∞–π–º–Ω—ñ 2 —Å–∏–º–≤–æ–ª–∏
          </span>
        </div>
      </div>
    </fieldset>

    <!-- Email field -->
    <fieldset class="input-group has-validation">
      <div
        class="w-100"
        [class.is-invalid]="email.invalid && (email.dirty || email.touched)"
      >
        <input
          [class.is-invalid]="email.invalid && (email.dirty || email.touched)"
          formControlName="email"
          type="text"
          class="form-control"
          id="emailControl"
          placeholder="–ü–æ—à—Ç–∞*"
        />
      </div>
      <div class="invalid-feedback">
        <div *ngIf="email.hasError('required')">
          <span class="error-span">Email –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π</span>
        </div>
        <div *ngIf="email.hasError('email') || email.hasError('minlength')">
          <span class="error-span">Email –Ω–µ–¥—ñ–π—Å–Ω–∏–π</span>
        </div>
      </div>
    </fieldset>

    <!-- Phone field -->
    <fieldset class="input-group has-validation">
      <div
        [class.is-invalid]="phone.invalid && (phone.dirty || phone.touched)"
        class="form-floating"
      >
        <ngx-intl-tel-input
          [class.is-invalid]="phone.invalid && phone.touched"
          [cssClass]="'form-control'"
          [preferredCountries]="preferredCountries"
          [enableAutoCountrySelect]="true"
          [customPlaceholder]="'–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É*'"
          [searchCountryFlag]="false"
          [selectFirstCountry]="false"
          [phoneValidation]="true"
          [separateDialCode]="false"
          name="phone1"
          formControlName="phone"
        >
        </ngx-intl-tel-input>
      </div>
      <div class="invalid-feedback">
        <div *ngIf="phone.hasError('required') && phone.touched">
          <span class="error-span">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π</span>
        </div>
        <div *ngIf="phone.hasError('validatePhoneNumber')">
          <span class="error-span">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –Ω–µ–¥—ñ–π—Å–Ω–∏–π</span>
        </div>
      </div>
    </fieldset>

    <!-- Timezone selection field -->
    <fieldset class="input-group has-validation">
      <div class="input-container w-100">
        <div
          [class.is-invalid]="
            timezone.invalid && (timezone.dirty || timezone.touched)
          "
          class="form-floating"
        >
          <select
            [class.is-invalid]="timezone.invalid && timezone.touched"
            id="timezone"
            formControlName="timezone"
            class="form-select"
          >
            <option *ngFor="let timezone of timezones" [value]="timezone.value">
              {{ timezone.display }}
            </option>
          </select>
          <label for="timezone">–û–±–µ—Ä—ñ—Ç—å —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å üïë</label>
        </div>
        <div class="invalid-feedback">
          <div *ngIf="timezone.hasError('required') && timezone.touched">
            <span class="error-span">–ß–∞—Å–æ–≤–∏–π –ø–æ—è—Å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π</span>
          </div>
        </div>
      </div>
    </fieldset>

    <div class="w-100 d-flex justify-content-center">
      <button
        (click)="changeEditMode()"
        *ngIf="!isEditMode"
        type="button"
        class="filled-btn"
      >
        <fa-icon [icon]="icons.edit"></fa-icon>
        &nbsp; –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
      </button>

      <div class="d-flex justify-content-around w-50" *ngIf="isEditMode">
        <button
          style="background-color: rgb(236, 141, 141); border: 2px solid #000"
          type="button"
          class="outline-btn"
          (click)="changeEditMode()"
        >
          –°–∫–∞—Å—É–≤–∞—Ç–∏
        </button>
        <button
          style="background-color: rgb(163, 232, 163); border: 2px solid #000"
          type="submit"
          class="outline-btn"
        >
          –ì–æ—Ç–æ–≤–æ
        </button>
      </div>
    </div>
  </form>
</div>
